const classicGames = [
  {
    name: 'Правда или действие',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Выбирай: честно ответь на вопрос или выполни задание. Классика для весёлых компаний!',
    detailedRules: 'Игроки садятся в круг. По очереди каждый выбирает другого участника и спрашивает: "Правда или действие?" При выборе "правда" нужно честно ответить на любой вопрос. При выборе "действие" - выполнить задание (например, спеть песню или станцевать). Отказываться нельзя! Игра продолжается, пока не надоест.'
  },
  {
    name: 'Крокодил',
    minPlayers: 3,
    maxPlayers: 20,
    rules: 'Объясняй слова жестами без слов. Кто угадает - становится следующим ведущим!',
    detailedRules: 'Один игрок загадывает слово (можно выбрать тему) и объясняет его только жестами, без слов и звуков. Остальные угадывают. Первый, кто назовёт правильный ответ, загадывает следующее слово. Можно использовать таймер (1-2 минуты на слово).'
  },
  {
    name: 'Контакт',
    minPlayers: 4,
    maxPlayers: 20,
    rules: 'Угадай загаданное слово по буквам через вопросы. Развивает логику и смекалку!',
    detailedRules: 'Ведущий загадывает слово и называет первую букву. Остальные задают вопросы, на которые можно ответить только "да" или "нет". Если кто-то догадывается, он говорит "Контакт!" и вместе с другим догадавшимся считает до 3 и называет слово. Если совпали - ведущий открывает следующую букву.'
  },
  {
    name: 'Шляпа',
    minPlayers: 4,
    maxPlayers: 16,
    rules: 'Объясняй слова из шляпы за ограниченное время. Командная игра на объяснение слов!',
    detailedRules: 'Подготовьте слова (по 5-7 на игрока) и сложите в шляпу. Разделитесь на команды. По очереди игроки вытягивают слова и объясняют их своей команде (без однокоренных слов). На раунд даётся 30-60 секунд. Побеждает команда, угадавшая больше слов.'
  },
  {
    name: 'Испорченный телефон',
    minPlayers: 4,
    maxPlayers: 20,
    rules: 'Передай фразу по цепочке шёпотом - посмотрим, что получится в конце!',
    detailedRules: 'Игроки садятся в ряд. Первый придумывает фразу и шёпотом говорит её следующему. Тот передаёт дальше. Последний игрок произносит вслух, что услышал. Обычно результат сильно отличается от оригинала - отсюда и смех!'
  },
  {
    name: 'Угадай кто?',
    minPlayers: 3,
    maxPlayers: 12,
    rules: 'На лбу у каждого имя персонажа. Задавай вопросы и выясняй, кто ты. Иногда ты — холодильник.',
    detailedRules: 'Игроки садятся в круг. Ведущий называет имя персонажа, которое должен угадать каждый. Игрок, у которого это имя, должен сказать: "Это я!" Остальные задают вопросы, чтобы угадать. Если кто-то угадал — он становится следующим "холодильником". Игра продолжается по кругу.'
  },
  {
    name: 'Бутылочка',
    minPlayers: 4,
    maxPlayers: 12,
    rules: 'Крути бутылочку и выполняй задания. Классика для смелых и весёлых!',
    detailedRules: 'Игроки садятся в круг. Ведущий кладёт бутылочку на центр стола. Первый игрок крутит бутылочку и называет слово. Следующий должен угадать слово, не используя однокоренные. Если угадал — становится ведущим. Если не угадал — выполняет задание. Игра продолжается по кругу.'
  },
  {
    name: 'Объясни слово',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Объясняй слова, не используя однокоренные. Кто угадает — тот молодец!',
    detailedRules: 'Игроки садятся в круг. Ведущий загадывает слово. Первый игрок объясняет слово, не используя однокоренные. Следующий должен угадать слово. Если угадал — становится ведущим. Если не угадал — выполняет задание. Игра продолжается по кругу.'
  },
  {
    name: 'Комплимент по кругу',
    minPlayers: 3,
    maxPlayers: 20,
    rules: 'Каждый говорит комплимент соседу. Кто засмущается — тот получает бонусный комплимент!',
    detailedRules: 'Игроки садятся в круг. Ведущий начинает: "Я считаю, что ты — лучший/лучшая в этом круге. Я люблю твою улыбку/смех/и т.д." Остальные должны сказать комплимент соседу. Если кто-то засмеялся — он получает бонусный комплимент от ведущего.'
  },
  {
    name: 'Я никогда не...',
    minPlayers: 3,
    maxPlayers: 20,
    rules: 'Говори то, чего никогда не делал. Если кто-то делал — рассказывает подробности!',
    detailedRules: 'Игроки садятся в круг. Ведущий начинает: "Я никогда не — (что-то, что вы не делали). Если кто-то делал — рассказывает подробности." Остальные должны сказать то, чего они никогда не делали. Если кто-то делал — рассказывает подробности.'
  },
  {
    name: 'Съедобное-несъедобное (устно)',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Ведущий называет предметы, игроки быстро отвечают: съедобное или нет. Ошибся — расскажи смешную историю!',
    detailedRules: 'Игроки садятся в круг. Ведущий называет предметы. Первый игрок быстро отвечает: "съедобное" или "не съедобное". Следующий должен угадать. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'Кто я?',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Загадай персонажа, остальные задают вопросы, чтобы угадать. Иногда ты — лампочка.',
    detailedRules: 'Игроки садятся в круг. Ведущий загадывает персонажа. Первый игрок задаёт вопросы, чтобы угадать. Следующий должен угадать. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'Да-нет',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Отвечай только “да” или “нет” на любые вопросы. Кто забудет — рассказывает анекдот!',
    detailedRules: 'Игроки садятся в круг. Ведущий задаёт вопрос. Первый игрок отвечает только "да" или "нет". Следующий должен угадать, о чём идёт речь. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'История по слову',
    minPlayers: 3,
    maxPlayers: 20,
    rules: 'Каждый добавляет по одному слову, чтобы получилась история. Обычно выходит абсурд!',
    detailedRules: 'Игроки садятся в круг. Ведущий начинает историю. Первый игрок добавляет слово, чтобы история стала логичной. Следующий должен угадать, что добавил игрок. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'Запретное слово',
    minPlayers: 3,
    maxPlayers: 20,
    rules: 'Выберите слово-табу. Кто произнесёт — выполняет смешное задание!',
    detailedRules: 'Игроки садятся в круг. Ведущий загадывает слово-табу. Первый игрок должен его произнести. Следующий должен угадать, что это за слово. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'Вопрос-ответ',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Можно отвечать только вопросом. Кто ошибётся — поёт песню!',
    detailedRules: 'Игроки садятся в круг. Ведущий задаёт вопрос. Первый игрок отвечает только вопросом. Следующий должен угадать, о чём идёт речь. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'Сказка наоборот',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Расскажи известную сказку, но с неожиданным финалом. Чем нелепее — тем лучше!',
    detailedRules: 'Игроки садятся в круг. Ведущий рассказывает известную сказку. Первый игрок должен рассказать сказку, но с неожиданным финалом. Следующий должен угадать, что добавил игрок. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'Пантомима эмоций',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Покажи эмоцию без слов, остальные угадывают. Иногда эмоция — “я забыл пароль от Wi-Fi”.',
    detailedRules: 'Игроки садятся в круг. Ведущий показывает эмоцию, не произнося слова. Остальные должны угадать, что это за эмоция. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'Рифмоплёт',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Придумай рифму к слову соседа. Кто не смог — рассказывает стихотворение!',
    detailedRules: 'Игроки садятся в круг. Ведущий называет слово. Первый игрок должен придумать рифму к этому слову. Следующий должен угадать, что придумал игрок. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'Секретный шёпот',
    minPlayers: 3,
    maxPlayers: 20,
    rules: 'Один шепчет фразу на ухо, остальные передают дальше. На выходе — всегда сюрприз!',
    detailedRules: 'Игроки садятся в круг. Ведущий шепчет фразу на ухо. Первый игрок передаёт фразу следующему шёпотом. Игра продолжается по кругу. Кто-то должен догадаться о фразе. Если кто-то не угадал — выполняет задание.'
  },
  {
    name: 'Загадочник',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Загадай загадку, остальные пытаются отгадать. Кто не угадал — придумывает новую!',
    detailedRules: 'Игроки садятся в круг. Ведущий загадывает загадку. Первый игрок должен угадать. Следующий должен угадать. Если угадал — становится ведущим. Если не угадал — придумывает новую загадку.'
  },
  {
    name: 'Смешной рассказчик',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Расскажи историю, используя как можно больше смешных слов. Чем нелепее — тем лучше!',
    detailedRules: 'Игроки садятся в круг. Ведущий начинает историю. Первый игрок должен рассказать историю, используя как можно больше смешных слов. Следующий должен угадать, что рассказал игрок. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'Путаница',
    minPlayers: 3,
    maxPlayers: 20,
    rules: 'Каждый говорит слово, не связанное с предыдущим. Кто случайно свяжет — рассказывает шутку!',
    detailedRules: 'Игроки садятся в круг. Ведущий называет слово. Первый игрок должен сказать слово, не связанное с предыдущим. Следующий должен угадать, что сказал игрок. Если угадал — становится ведущим. Если не угадал — рассказывает шутку.'
  },
  {
    name: 'Сказочный микс',
    minPlayers: 3,
    maxPlayers: 20,
    rules: 'Смешайте героев разных сказок в одной истории. Колобок встречает Гарри Поттера? Почему бы и нет!',
    detailedRules: 'Игроки садятся в круг. Ведущий начинает историю. Первый игрок должен смешать героев разных сказок. Следующий должен угадать, что добавил игрок. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'Палиндром',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Придумай слово или фразу, одинаковую слева направо и справа налево. Кто не смог — поёт скороговорку!',
    detailedRules: 'Игроки садятся в круг. Ведущий называет слово или фразу. Первый игрок должен придумать слово или фразу, одинаковую слева направо и справа налево. Следующий должен угадать, что придумал игрок. Если угадал — становится ведущим. Если не угадал — поёт скороговорку.'
  },
  {
    name: 'Скороговорка',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Произнеси скороговорку без ошибок. Кто запнулся — рассказывает смешную историю!',
    detailedRules: 'Игроки садятся в круг. Ведущий называет скороговорку. Первый игрок должен произнести скороговорку без ошибок. Следующий должен угадать, что произнёс игрок. Если угадал — становится ведущим. Если не угадал — рассказывает смешную историю.'
  },
  {
    name: 'Импровизация',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Ведущий задаёт тему, остальные придумывают мини-сценку. Чем абсурднее — тем веселее!',
    detailedRules: 'Игроки садятся в круг. Ведущий задаёт тему. Первый игрок должен придумать мини-сценку по этой теме. Следующий должен угадать, что придумал игрок. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'Звёздный голос',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Изобрази голосом известного персонажа. Кто угадает — следующий!',
    detailedRules: 'Игроки садятся в круг. Ведущий называет имя известного персонажа. Первый игрок должен изобразить этот персонаж голосом. Следующий должен угадать, кто изобразил игрок. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'Сказка наизнанку',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Расскажи сказку, где все герои ведут себя наоборот. Волк спасает Красную Шапочку!',
    detailedRules: 'Игроки садятся в круг. Ведущий рассказывает известную сказку. Первый игрок должен рассказать сказку, где все герои ведут себя наоборот. Следующий должен угадать, что добавил игрок. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'Смешные вопросы',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Задавай самые нелепые вопросы соседу. Кто засмеётся — проиграл!',
    detailedRules: 'Игроки садятся в круг. Ведущий задаёт самый нелепый вопрос. Первый игрок должен задать этот вопрос соседу. Следующий должен угадать, какой вопрос задал игрок. Если угадал — становится ведущим. Если не угадал — проиграл.'
  },
  {
    name: 'Телепатия',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Попробуй угадать, о чём думает сосед. Иногда — о пицце.',
    detailedRules: 'Игроки садятся в круг. Ведущий задаёт вопрос. Первый игрок должен угадать, о чём думает сосед. Следующий должен угадать, о чём думает игрок. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'Сказочный переводчик',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Один рассказывает сказку, другой переводит на “язык животных”, “инопланетян” или “роботов”.',
    detailedRules: 'Игроки садятся в круг. Ведущий начинает рассказывать сказку. Первый игрок должен перевести сказку на “язык животных”, “инопланетян” или “роботов”. Следующий должен угадать, что перевел игрок. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  },
  {
    name: 'Смешной диктор',
    minPlayers: 2,
    maxPlayers: 20,
    rules: 'Озвучь новости в стиле комедии. Чем абсурднее — тем лучше!',
    detailedRules: 'Игроки садятся в круг. Ведущий задаёт тему новостей. Первый игрок должен озвучить новости в стиле комедии. Следующий должен угадать, что озвучил игрок. Если угадал — становится ведущим. Если не угадал — выполняет задание.'
  }
];

// Слова для игры "Крокодил"
const crocodileWords = [
  'пылесос', 'йога', 'космонавт', 'пожарный', 'балерина', 'слон', 'гитара', 'пицца', 'самолёт', 'пловец',
  'учитель', 'пингвин', 'библиотека', 'паровоз', 'футболист', 'скейтборд', 'петух', 'компьютер', 'арбуз', 'собака',
  'пожарная машина', 'велосипед', 'певец', 'пекарь', 'медведь', 'пароход', 'пилот', 'рыбак', 'пчела', 'петрушка',
  'пылесос', 'пловец', 'пожарный', 'балерина', 'слон', 'гитара', 'пицца', 'самолёт', 'учитель', 'пингвин',
  'библиотека', 'паровоз', 'футболист', 'скейтборд', 'петух', 'компьютер', 'арбуз', 'собака', 'пожарная машина',
  'велосипед', 'певец', 'пекарь', 'медведь', 'пароход', 'пилот', 'рыбак', 'пчела', 'петрушка', 'дирижёр',
  'пожарная часть', 'пиццерия', 'пекарня', 'зоопарк', 'аквариум', 'парк', 'музей', 'театр', 'аптека', 'магазин',
  'школа', 'университет', 'студент', 'учёный', 'врач', 'медсестра', 'программист', 'дизайнер', 'строитель', 'маляр',
  'шахтёр', 'водитель', 'таксист', 'полицейский', 'солдат', 'официант', 'бармен', 'директор', 'секретарь', 'менеджер',
  'спортсмен', 'теннисист', 'лыжник', 'боксёр', 'шахматист', 'гимнаст', 'баскетболист', 'волейболист', 'пловец', 'прыгун',
  'певица', 'актриса', 'режиссёр', 'оператор', 'журналист', 'фотограф', 'писатель', 'поэт', 'редактор', 'переводчик',
  'стол', 'стул', 'диван', 'кресло', 'кровать', 'шкаф', 'зеркало', 'лампа', 'часы', 'телевизор',
  'телефон', 'планшет', 'ноутбук', 'мышка', 'клавиатура', 'принтер', 'сканер', 'камера', 'микрофон', 'колонка',
  'чайник', 'кофеварка', 'блендер', 'миксер', 'кастрюля', 'сковорода', 'тарелка', 'чашка', 'ложка', 'вилка',
  'нож', 'карандаш', 'ручка', 'ластик', 'линейка', 'тетрадь', 'книга', 'журнал', 'газета', 'карта',
  'глобус', 'рюкзак', 'портфель', 'зонт', 'шарф', 'шапка', 'перчатки', 'куртка', 'пальто', 'ботинки',
  'туфли', 'кроссовки', 'сапоги', 'носки', 'брюки', 'юбка', 'платье', 'рубашка', 'футболка', 'пиджак',
  'галстук', 'ремень', 'очки', 'маска', 'шлем', 'перчатки', 'пояс', 'браслет', 'кольцо', 'серьги',
  'ожерелье', 'чемодан', 'коробка', 'пакет', 'бутылка', 'банка', 'стакан', 'ведро', 'таз', 'швабра',
  'веник', 'совок', 'губка', 'полотенце', 'простыня', 'подушка', 'одеяло', 'матрас', 'занавеска', 'ковёр',
  'картина', 'фото', 'рамка', 'плакат', 'флаг', 'гитара', 'барабан', 'скрипка', 'труба', 'саксофон',
  'пианино', 'гармонь', 'аккордеон', 'флейта', 'кларнет', 'балалайка', 'домра', 'мандолина', 'арфа', 'контрабас',
  'собака', 'кошка', 'попугай', 'канарейка', 'хомяк', 'крыса', 'мышь', 'кролик', 'еж', 'черепаха',
  'лягушка', 'змея', 'ящерица', 'улитка', 'паук', 'муравей', 'пчела', 'оса', 'жук', 'бабочка',
  'корова', 'лошадь', 'осёл', 'коза', 'овца', 'свинья', 'курица', 'утка', 'гусь', 'индюк',
  'петух', 'цыплёнок', 'страус', 'верблюд', 'слон', 'жираф', 'тигр', 'лев', 'леопард', 'волк',
  'лиса', 'медведь', 'белка', 'заяц', 'ёж', 'барсук', 'кабан', 'лось', 'олень', 'косуля'
];

// Слова для игры "Шляпа"
const hatWords = [
  'арбуз', 'балет', 'барабан', 'библиотека', 'билет', 'бокал', 'больница', 'бутылка', 'ваза', 'велосипед',
  'вертолёт', 'ветер', 'вилка', 'виноград', 'вода', 'воробей', 'газета', 'гитара', 'глобус', 'город',
  'гриб', 'грузовик', 'дача', 'дворец', 'диван', 'дождь', 'дом', 'доска', 'дракон', 'друг',
  'еж', 'жираф', 'жук', 'завод', 'заяц', 'зебра', 'зеркало', 'зонт', 'игра', 'игрушка',
  'инструмент', 'кабан', 'кактус', 'карандаш', 'карта', 'картина', 'квартира', 'книга', 'ковёр', 'компьютер',
  'корабль', 'корова', 'кот', 'кровать', 'кролик', 'кружка', 'кукла', 'курица', 'лампа', 'лев',
  'лес', 'лиса', 'лист', 'лодка', 'магазин', 'маляр', 'медведь', 'молоко', 'мост', 'музей',
  'мышь', 'носорог', 'облако', 'овца', 'огурец', 'окно', 'олень', 'опера', 'осёл', 'остров',
  'пальто', 'парк', 'пароход', 'песок', 'петух', 'пицца', 'планета', 'платье', 'пловец', 'погода',
  'подушка', 'поезд', 'пожарный', 'покрывало', 'полка', 'попугай', 'портфель', 'потолок', 'поток', 'прачка',
  'принтер', 'программа', 'птица', 'пылесос', 'работа', 'ракета', 'река', 'ремень', 'рисунок', 'ромашка',
  'ручка', 'рыба', 'рыбак', 'сад', 'самолёт', 'сапоги', 'сахар', 'свинья', 'север', 'секретарь',
  'собака', 'солнце', 'сон', 'сосна', 'спектакль', 'спорт', 'стакан', 'стол', 'стул', 'сумка',
  'суп', 'сыр', 'такси', 'танец', 'танк', 'тарелка', 'театр', 'телевизор', 'телефон', 'тетрадь',
  'тигр', 'трактор', 'трамвай', 'тренер', 'троллейбус', 'труба', 'туфли', 'уж', 'университет', 'утка',
  'фартук', 'февраль', 'флаг', 'фломастер', 'фотограф', 'фотоаппарат', 'фрукты', 'хлеб', 'хомяк', 'цветок',
  'цирк', 'чайник', 'часы', 'чемодан', 'черепаха', 'шапка', 'шкаф', 'школа', 'шляпа', 'шоссе',
  'щенок', 'экран', 'электричка', 'энциклопедия', 'яблоко', 'ягода', 'яйцо', 'якорь', 'ястреб', 'ящик',
  'автобус', 'аптека', 'бассейн', 'бензин', 'билет', 'больница', 'бочка', 'вагон', 'весна', 'весы',
  'вишня', 'вода', 'ворота', 'газон', 'гвоздь', 'гитара', 'глаз', 'гнездо', 'гриб', 'груша',
  'дверь', 'дедушка', 'день', 'дерево', 'дочка', 'дрова', 'душ', 'журнал', 'забор', 'заяц',
  'зебра', 'зеркало', 'зима', 'зуб', 'игла', 'игра', 'игрушка', 'кабинет', 'каша', 'книга'
];

function getRandomHatWords(count) {
  const shuffled = hatWords.slice().sort(() => Math.random() - 0.5);
  return shuffled.slice(0, count);
}

// Слова для игры "Объясни слово"
const explainWords = [
  'арбуз', 'балкон', 'барабан', 'библиотека', 'билет', 'бокал', 'больница', 'бутылка', 'ваза', 'велосипед',
  'вертолёт', 'ветер', 'вилка', 'виноград', 'вода', 'воробей', 'газета', 'гитара', 'глобус', 'город',
  'гриб', 'грузовик', 'дача', 'дворец', 'диван', 'дождь', 'дом', 'доска', 'друг', 'еж',
  'жираф', 'жук', 'завод', 'заяц', 'зебра', 'зеркало', 'зонт', 'игра', 'игрушка', 'инструмент',
  'кабан', 'кактус', 'карандаш', 'карта', 'картина', 'квартира', 'книга', 'ковёр', 'компьютер', 'корабль',
  'корова', 'кот', 'кровать', 'кролик', 'кружка', 'кукла', 'курица', 'лампа', 'лев', 'лес',
  'лиса', 'лист', 'лодка', 'магазин', 'маляр', 'медведь', 'молоко', 'мост', 'музей', 'мышь',
  'носорог', 'облако', 'овца', 'огурец', 'окно', 'олень', 'опера', 'осёл', 'остров', 'пальто',
  'парк', 'пароход', 'песок', 'петух', 'пицца', 'планета', 'платье', 'пловец', 'погода', 'подушка',
  'поезд', 'пожарный', 'покрывало', 'полка', 'попугай', 'портфель', 'потолок', 'поток', 'прачка', 'принтер',
  'программа', 'птица', 'пылесос', 'работа', 'ракета', 'река', 'ремень', 'рисунок', 'ромашка', 'ручка',
  'рыба', 'рыбак', 'сад', 'самолёт', 'сапоги', 'сахар', 'свинья', 'север', 'секретарь', 'собака',
  'солнце', 'сон', 'сосна', 'спектакль', 'спорт', 'стакан', 'стол', 'стул', 'сумка', 'суп',
  'сыр', 'такси', 'танец', 'танк', 'тарелка', 'театр', 'телевизор', 'телефон', 'тетрадь', 'тигр',
  'трактор', 'трамвай', 'тренер', 'троллейбус', 'труба', 'туфли', 'уж', 'университет', 'утка', 'фартук',
  'февраль', 'флаг', 'фломастер', 'фотограф', 'фотоаппарат', 'фрукты', 'хлеб', 'хомяк', 'цветок', 'цирк',
  'чайник', 'часы', 'чемодан', 'черепаха', 'шапка', 'шкаф', 'школа', 'шляпа', 'шоссе', 'щенок',
  'экран', 'электричка', 'энциклопедия', 'яблоко', 'ягода', 'яйцо', 'якорь', 'ястреб', 'ящик'
];

function getRandomExplainWords(count) {
  const shuffled = explainWords.slice().sort(() => Math.random() - 0.5);
  return shuffled.slice(0, count);
}

// Отправка данных о новой игре в Telegram-бот через Flask API
function sendGameToBot(gameName, messages) {
  console.log('DEBUG: sendGameToBot called', gameName, messages);
  fetch('http://localhost:8080/send_game', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ game_name: gameName, messages })
  }).then(r => {
    if (!r.ok) {
      console.warn('Ошибка отправки в Telegram-бот:', r.statusText);
    }
  }).catch(e => {
    console.warn('Ошибка соединения с Flask API:', e);
  });
}

// Вспомогательные функции для генерации слов
function getRandomWords(arr, count) {
  const shuffled = arr.slice().sort(() => Math.random() - 0.5);
  return shuffled.slice(0, count);
}

// Обновить showExtraContent для кнопок
function showExtraContent(gameName) {
  const extraDiv = document.getElementById('extra-content');
  extraDiv.innerHTML = '';
  if (gameName === 'Крокодил') {
    extraDiv.innerHTML = `<button class='neon-btn-green' onclick='window.renewCrocodileWords()'>Обновить слова</button>`;
    window.renewCrocodileWords = function() {
      const playerCount = getRegisteredUserCount();
      const words = getRandomWords(crocodileWords, playerCount);
      sendGameToBot('Крокодил', words.map(w => `Тебе слово: ${w}`));
    };
  } else if (gameName === 'Шляпа') {
    extraDiv.innerHTML = `<button class='neon-btn-green' onclick='window.renewHatWords()'>Обновить слова</button>`;
    window.renewHatWords = function() {
      const playerCount = getRegisteredUserCount();
      const words = getRandomHatWords(playerCount);
      sendGameToBot('Шляпа', words.map(w => `Тебе слово: ${w}`));
    };
  } else if (gameName === 'Объясни слово') {
    extraDiv.innerHTML = `<button class='neon-btn-green' onclick='window.renewExplainWords()'>Обновить слова</button>`;
    window.renewExplainWords = function() {
      const playerCount = getRegisteredUserCount();
      const words = getRandomExplainWords(playerCount);
      sendGameToBot('Объясни слово', words.map(w => `Тебе слово: ${w}`));
    };
  }
}

// Получить количество зарегистрированных пользователей (заглушка, заменить на реальное получение)
function getRegisteredUserCount() {
  // TODO: Получать с сервера или хранить в localStorage после регистрации
  // Пока что используем выбранное число игроков на сайте
  const val = parseInt(document.getElementById('playerCount').value);
  return isNaN(val) ? 2 : val;
}

// Вызов sendGameToBot при генерации классической игры
function generateClassic() {
  const playerCount = parseInt(document.getElementById('playerCount').value);
  let filteredGames = classicGames.slice(0, 8).filter(g => g.name !== 'Данетки');
  if (!isNaN(playerCount)) {
    filteredGames = filteredGames.filter(g => playerCount >= g.minPlayers && playerCount <= g.maxPlayers);
  }
  if (filteredGames.length === 0) {
    document.getElementById('result').textContent = 'Нет подходящих игр для такого количества игроков!';
    document.getElementById('extra-content').innerHTML = '';
    return;
  }
  const game = filteredGames[Math.floor(Math.random() * filteredGames.length)];
  document.getElementById('result').innerHTML = `<div class="neon-game-name">${game.name}</div><div style="margin-top:0.7em;">${game.detailedRules || game.rules}</div>`;
  showExtraContent(game.name);

  // Формируем messages для отправки в бот
  let messages = [];
  if (game.name === 'Крокодил') {
    const words = getRandomWords(crocodileWords, getRegisteredUserCount());
    messages = words.map(w => `Тебе слово: ${w}`);
  } else if (game.name === 'Шляпа') {
    const words = getRandomHatWords(getRegisteredUserCount());
    messages = words.map(w => `Тебе слово: ${w}`);
  } else if (game.name === 'Объясни слово') {
    const words = getRandomExplainWords(getRegisteredUserCount());
    messages = words.map(w => `Тебе слово: ${w}`);
  } else {
    messages = [`Игра: ${game.name}\n${game.rules}`];
  }
  sendGameToBot(game.name, messages);
} 